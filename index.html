<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DnD Roll Tables</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .roll-table { margin-bottom: 20px; }
    .roll-result { font-weight: bold; color: green; }
  </style>
</head>
<body>
  <h1>DnD Roll Tables</h1>
  <div>
    <label for="rollTableSelect">Select Roll Table:</label>
    <select id="rollTableSelect"></select>
    <button id="createTableBtn">Create New Roll Table</button>
    <button id="clearResultsBtn">Clear Results</button>
  </div>
  <div id="tables"></div>
  <div id="createTableModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid black; z-index: 1000;">
    <h2>Create New Roll Table</h2>
    <label for="tableTitle">Title:</label>
    <input type="text" id="tableTitle" placeholder="Enter table title" /><br />
    <label for="tableSummary">Summary (supports HTML):</label>
    <textarea id="tableSummary" placeholder="Enter table summary (e.g., <b>bold</b>, <i>italic</i>)"></textarea><br />
    <label for="tableFormula">Formula:</label>
    <input type="text" id="tableFormula" placeholder="e.g., 1d20" /><br />
    <h3>Results</h3>
    <div id="resultsContainer">
      <div class="result">
        <label>Text:</label>
        <input type="text" class="resultText" placeholder="Enter result text" />
        <label>Range:</label>
        <input type="text" class="resultRange" placeholder="e.g., 1-5" />
        <label>Type:</label>
        <select class="resultTypeSelect">
          <option value="text">Text</option>
          <option value="rollTable">Roll Table</option>
          <option value="spell">Spell</option>
          <option value="equipment">Equipment</option>
        </select>
        <div class="nestedTableSelection" style="display: none;">
          <label>Nested Table:</label>
          <select class="nestedTableSelect">
            <!-- Options will be dynamically populated -->
          </select>
        </div>
        <div class="spellSelection" style="display: none;">
          <label>Spell:</label>
          <select class="spellSelect"></select>
        </div>
        <div class="equipmentSelection" style="display: none;">
          <label>Equipment:</label>
          <select class="equipmentSelect"></select>
        </div>
        <div class="magicItemSelection" style="display: none;">
          <label>Magic Item:</label>
          <select class="magicItemSelect"></select>
        </div>
      </div>
    </div>
    <button id="addResultBtn">+ Add Result</button><br /><br />
    <button id="saveTableBtn">Save</button>
    <button id="cancelTableBtn">Cancel</button>
  </div>
  <div id="editTableModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid black; z-index: 1000; max-height: 80%; overflow-y: auto; box-sizing: border-box;">
    <h2>Edit Roll Table</h2>
    <label for="editTableTitle">Title:</label>
    <input type="text" id="editTableTitle" placeholder="Enter table title" style="width: 100%;" /><br />
    <label for="editTableSummary">Summary (supports HTML):</label>
    <textarea id="editTableSummary" placeholder="Enter table summary (e.g., <b>bold</b>, <i>italic</i>)" style="width: 100%;"></textarea><br />
    <label for="editTableFormula">Formula:</label>
    <input type="text" id="editTableFormula" placeholder="e.g., 1d20" style="width: 100%;" /><br />
    <h3>Results</h3>
    <div id="editResultsContainer" style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
      <!-- Results will be dynamically added here -->
    </div>
    <button id="addEditResultBtn">+ Add Result</button><br /><br />
    <button id="saveEditTableBtn" style="margin-top: 10px;">Save</button>
    <button id="cancelEditTableBtn" style="margin-top: 10px;">Cancel</button>
  </div>
  <div id="modalOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 999;"></div>
  <script src="renderer.js"></script>
</body>
</html>
